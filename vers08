import telebot
import random
from telebot import types
from selenium import webdriver
from selenium.webdriver.common.by import By
from email_validate import validate, validate_or_fail
import time
import re

bot = telebot.TeleBot('')

# ÐžÑ‚ÐºÐ°Ð· Ð² Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²
@bot.message_handler(content_types=["audio", "document", "photo", "sticker", "video", "video_note", "voice", "location", "contact",
                 "new_chat_members", "left_chat_member", "new_chat_title", "new_chat_photo", "delete_chat_photo",
                 "group_chat_created", "supergroup_chat_created", "channel_chat_created", "migrate_to_chat_id",
                 "migrate_from_chat_id", "pinned_message"])
def any_files(message):
    bot.send_message(message.chat.id, "Ð˜Ð·Ð²Ð¸Ð½Ð¸Ñ‚Ðµ, Ñ Ð½Ðµ ÑƒÐ¼ÐµÑŽ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð¾Ð²", reply_markup=markup_start)
    
# ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° ÐºÐ¾Ð¼Ð°Ð½Ð´ "start" Ð¸ "help"

@bot.message_handler(commands=["start", "help"])
def start(message):
    global markup_start
    markup_start = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=2)
    item_start_1 = types.KeyboardButton("âš™ï¸ Ð¢ÐµÑ….Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°")
    item_start_2 = types.KeyboardButton("ðŸ“‡ Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑÑ‡ÐµÑ‚")
    item_start_3 = types.KeyboardButton("â­ ÐÐºÑ†Ð¸Ð¸")
    item_start_4 = types.KeyboardButton("â˜Ž ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð¡Ð¦")
    item_start_5 = types.KeyboardButton("ðŸ“˜ Ð’Ñ‹Ð¿Ð¸ÑÐºÐ° Ð•Ð“Ð Ð®Ð›")
    item_start_6 = types.KeyboardButton("ðŸ’» Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹")
    markup_start.add(item_start_1, item_start_2, item_start_3, item_start_4, item_start_6)
    bot.send_message(message.chat.id, 'Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ, ' + message.from_user.first_name +
                     '! \nÐ­Ñ‚Ð¾ Ð±Ð¾Ñ‚ ÑÐµÑ€Ð²Ð¸ÑÐ½Ð¾Ð³Ð¾ Ñ†ÐµÐ½Ñ‚Ñ€Ð° \nÐÐž "ÐŸÐ¤ "Ð¡ÐšÐ‘ ÐšÐ¾Ð½Ñ‚ÑƒÑ€".'+'\nÐ§ÐµÐ¼ Ð’Ð°Ð¼ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ?', reply_markup=markup_start)
    

# ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ
@bot.message_handler(content_types=["text"])
def tp(message):
    if message.chat.type == "private":
        if message.text == "âš™ï¸ Ð¢ÐµÑ….Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°": 
            markup_tp = types.ReplyKeyboardMarkup(resize_keyboard=True, row_width=1)
            item_tp_1 = types.KeyboardButton("ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ")
            item_tp_2 = types.KeyboardButton("ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÑŒ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
            item_tp_3 = types.KeyboardButton("Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð´Ð¸ÑÐº")
            item_tp_4 = types.KeyboardButton("Ð§Ð°ÑÑ‚Ð¾ Ð·Ð°Ð´Ð°Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹")
            item_tp_5 = types.KeyboardButton("Ð’ Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ")
            markup_tp.add(item_tp_1, item_tp_2, item_tp_3, item_tp_4, item_tp_5)
            bot.send_message(message.chat.id, "ÐšÐ°Ðº Ð’Ð°Ð¼ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð¾Ð±Ð½Ð¾ ÑÐ²ÑÐ·Ð°Ñ‚ÑŒÑÑ Ñ Ð½Ð°Ð¼Ð¸?", reply_markup=markup_tp)

        if message.text == "ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ":
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð˜ÐÐ:")
            bot.register_next_step_handler(message, reg_tp)

        if message.text == "ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÑŒ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°":
            bot.send_message(message.chat.id, "Ð ÐµÐ¶Ð¸Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹: \nÐ¿Ð½-Ñ‡Ñ‚ Ñ 9:00 Ð´Ð¾ 18:00 \nÐ¿Ñ‚ Ñ 9:00 Ð´Ð¾ 17:00 \n+7(347)200-80-15 \nÐ¤ÐµÐ´ÐµÑ€Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ 24/7 \n8 800 500-50-80")

        if message.text == "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð´Ð¸ÑÐº":
            markup_install = types.InlineKeyboardMarkup()
            install_button = types.InlineKeyboardButton(text="ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð½Ð° Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð´Ð¸ÑÐº", url="https://install.kontur.ru")
            markup_install.add(install_button)
            bot.send_message(message.chat.id, "ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð¸ Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸ Ð½Ð° ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð´Ð¸ÑÐº.", reply_markup=markup_install)

        if message.text == "Ð§Ð°ÑÑ‚Ð¾ Ð·Ð°Ð´Ð°Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹":
            markup_faq = types.InlineKeyboardMarkup(row_width=1)
            url_button_faq_1 = types.InlineKeyboardButton(text="Ð¢Ð¾Ð¿â€‘5 Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¾Ð± ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ¸ Ð² 2022 Ð³Ð¾Ð´Ñƒ", url="https://ca.kontur.ru/articles/22128-top5_63fz_2022")
            url_button_faq_2 = types.InlineKeyboardButton(text="ÐšÐ°Ðº Ð¿Ñ€Ð¾Ð´Ð»Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½ÑƒÑŽ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒ", url="https://ca.kontur.ru/faq/lk/prodlenie-sertifikata")
            url_button_faq_3 = types.InlineKeyboardButton(text="ÐšÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐµ Ð¼ÐµÑÑ‚Ð¾ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚?", url="https://ca.kontur.ru/faq/teh/nastroika-i-ustanovka")
            url_button_faq_4 = types.InlineKeyboardButton(text="Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ñ€Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ", url="https://ca.kontur.ru/faq/teh")
            url_button_faq_5 = types.InlineKeyboardButton(text="Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒÑŽ", url="https://ca.kontur.ru/faq/signature")
            url_button_faq_6 = types.InlineKeyboardButton(text="Ð Ð°Ð±Ð¾Ñ‚Ð° Ð½Ð° Ð“Ð¾ÑÑƒÐ´Ð°Ñ€ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ð¾Ñ€Ñ‚Ð°Ð»Ð°Ñ…", url="https://ca.kontur.ru/faq/portal")
            url_button_faq_7 = types.InlineKeyboardButton(text="Ð Ð°Ð±Ð¾Ñ‚Ð° Ð² ÐšÐ¾Ð½Ñ‚ÑƒÑ€.Ð­ÐºÑÑ‚ÐµÑ€Ð½", url="https://www.kontur-extern.ru/support/faq/36")
            url_button_faq_8 = types.InlineKeyboardButton(text="Ð Ð°Ð±Ð¾Ñ‚Ð° Ð² ÐšÐ¾Ð½Ñ‚ÑƒÑ€.Ð”Ð¸Ð°Ð´Ð¾Ðº", url="https://www.diadoc.ru/docs/faq")   
            markup_faq.add(url_button_faq_1, url_button_faq_2, url_button_faq_3, url_button_faq_4, url_button_faq_5, url_button_faq_6, url_button_faq_7, url_button_faq_8)
            bot.send_message(message.chat.id, "Ð§Ð°ÑÑ‚Ð¾ Ð·Ð°Ð´Ð°Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹", reply_markup=markup_faq)

        if message.text == "ðŸ“‡ Ð—Ð°Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑÑ‡ÐµÑ‚":
            markup_score = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_score_1 = types.KeyboardButton("Ð­ÐºÑÑ‚ÐµÑ€Ð½")
            item_score_2 = types.KeyboardButton("Ð”Ð¸Ð°Ð´Ð¾Ðº")
            item_score_3 = types.KeyboardButton("Ð¤Ð¾ÐºÑƒÑ")
            item_score_4 = types.KeyboardButton("Ð—Ð°ÐºÑƒÐ¿ÐºÐ¸")
            item_score_11 = types.KeyboardButton("ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ")
            item_score_12 = types.KeyboardButton("Ð’ Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ")
            markup_score.add(item_score_1, item_score_2, item_score_3, item_score_4, item_score_11, item_score_12)
            bot.send_message(message.chat.id, 'ÐÐ° ÐºÐ°ÐºÐ¾Ð¹ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚?', reply_markup=markup_score)

        if message.text == "Ð­ÐºÑÑ‚ÐµÑ€Ð½":
            global extern
            extern = message.text
            markup_reg_extern = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_reg_extern_1 = types.KeyboardButton("ÐžÐ±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÑŽÑ‰Ð°Ñ Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ")
            item_reg_extern_2 = types.KeyboardButton("ÐžÐ´Ð¸Ð½Ð¾Ñ‡Ð½Ð°Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ")
            markup_reg_extern.add(item_reg_extern_1, item_reg_extern_2)
            bot.send_message(message.chat.id, 'Ð£ Ð’Ð°Ñ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÑŽÑ‰Ð°Ñ Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ Ð¸Ð»Ð¸ Ð¾Ð´Ð¸Ð½Ð¾Ñ‡Ð½Ð°Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ?', reply_markup=markup_reg_extern)
            bot.register_next_step_handler(message, reg_extern_contacts)

        if message.text == "Ð”Ð¸Ð°Ð´Ð¾Ðº":
            global diadoc
            diadoc = message.text
            markup_dd = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_dd_1 = types.KeyboardButton("250 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_2 = types.KeyboardButton("600 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_3 = types.KeyboardButton("1200 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_4 = types.KeyboardButton("1500 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_5 = types.KeyboardButton("2000 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_6 = types.KeyboardButton("3000 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_7 = types.KeyboardButton("5000 Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
            item_dd_8 = types.KeyboardButton("ÐœÐ½Ðµ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ Ð² Ð¿Ð¾Ð´Ð±Ð¾Ñ€Ðµ")
            markup_dd.add(item_dd_1, item_dd_2, item_dd_3, item_dd_4, item_dd_5, item_dd_6, item_dd_7, item_dd_8)
            bot.send_message(message.chat.id, 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ð°ÐºÐµÑ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²', reply_markup=markup_dd)
            bot.register_next_step_handler(message, reg_dd)

        if message.text == "Ð¤Ð¾ÐºÑƒÑ":
            global focus
            focus = message.text
            markup_focus = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_focus_1 = types.KeyboardButton("Ð‘Ð¸Ð·Ð½ÐµÑ")
            item_focus_2 = types.KeyboardButton("ÐŸÑ€ÐµÐ¼Ð¸ÑƒÐ¼")
            item_focus_3 = types.KeyboardButton("ÐŸÑ€ÐµÐ¼Ð¸ÑƒÐ¼ +")
            markup_focus.add(item_focus_1, item_focus_2, item_focus_3)
            bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð°Ñ€Ð¸Ñ„Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½", reply_markup=markup_focus)
            bot.register_next_step_handler(message, reg_focus)

        if message.text == "Ð—Ð°ÐºÑƒÐ¿ÐºÐ¸":
            global zakupki
            zakupki = message.text
            markup_reg_zakupki = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_zakupki_1 = types.KeyboardButton("Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚")
            item_zakupki_2 = types.KeyboardButton("Ð­ÐºÑÐ¿ÐµÑ€Ñ‚")
            item_zakupki_3 = types.KeyboardButton("ÐšÐ¾Ð¼Ð°Ð½Ð´Ð½Ñ‹Ð¹")
            markup_reg_zakupki.add(item_zakupki_1, item_zakupki_2, item_zakupki_3)
            bot.send_message(message.chat.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð°Ñ€Ð¸Ñ„Ð½Ñ‹Ð¹ Ð¿Ð»Ð°Ð½", reply_markup=markup_reg_zakupki)
            bot.register_next_step_handler(message, reg_zakupki_tarif)
            
        if message.text == 'â˜Ž ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð¡Ð¦': 
            markup_info = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_info_1 = types.KeyboardButton("/help")
            markup_info.add(item_info_1)
            bot.send_message(message.chat.id, 'ÐÐ´Ñ€ÐµÑ: Ð³. Ð£Ñ„Ð°, ÑƒÐ». ÐšÐ¾Ð¼ÑÐ¾Ð¼Ð¾Ð»ÑŒÑÐºÐ°Ñ, \nÐ´. 165/3, Ð¾Ñ„Ð¸Ñ 803 \nÑ‚ÐµÐ»ÐµÑ„Ð¾Ð½: +7(347)200-80-15 \nEmail: mail@kontur-02.ru \n\nhttps://2gis.ru/ufa/inside/2393172957224022/firm/70000001022797956?m=56.027967%2C54.76622%2F16.39 \nÐ”Ð»Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ /help', reply_markup=markup_info)

        if message.text == "â­ ÐÐºÑ†Ð¸Ð¸":
            markup_action = types.InlineKeyboardMarkup(row_width=1)
            url_button_action_1 = types.InlineKeyboardButton(text="ÐÐºÑ†Ð¸Ð¸ ÐšÐ¾Ð½Ñ‚ÑƒÑ€.Ð­ÐºÑÑ‚ÐµÑ€Ð½", url="https://www.kontur-extern.ru/news/actions")
            url_button_action_2 = types.InlineKeyboardButton(text="ÐÐºÑ†Ð¸Ð¸ ÐšÐ¾Ð½Ñ‚ÑƒÑ€.Ð”Ð¸Ð°Ð´Ð¾Ðº", url="https://kontur.ru/diadoc/actions/313")
            markup_action.add(url_button_action_1, url_button_action_2)
            bot.send_message(message.chat.id, "ÐÐºÑ†Ð¸Ð¸ Ð¡ÐšÐ‘ ÐšÐ¾Ð½Ñ‚ÑƒÑ€", reply_markup=markup_action)

        if message.text == "ðŸ“˜ Ð’Ñ‹Ð¿Ð¸ÑÐºÐ° Ð•Ð“Ð Ð®Ð›":
            bot.send_message(message.chat.id, "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð˜ÐÐ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸, Ð¿Ð¾ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð¿Ð¸ÑÐºÑƒ Ð•Ð“Ð Ð®Ð›")
            bot.register_next_step_handler(message, egrul)

        if message.text == "ðŸ’» Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹":
            markup_service = types.InlineKeyboardMarkup(row_width=1)
            url_button_service_1 = types.InlineKeyboardButton(text="Ð­ÐºÑÑ‚ÐµÑ€Ð½ - ÐžÑ‚Ñ‡ÐµÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚", url="https://kontur.ru/extern?p=3933")
            url_button_service_2 = types.InlineKeyboardButton(text="Ð”Ð¸Ð°Ð´Ð¾Ðº - Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ñ‹Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð¾Ð±Ð¾Ñ€Ð¾Ñ‚ Ñ ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð°Ð¼Ð¸", url="https://kontur.ru/diadoc?p=3933")
            url_button_service_3 = types.InlineKeyboardButton(text="Ð¤Ð¾ÐºÑƒÑ - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ‚Ñ€Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð²", url="https://kontur.ru/focus?p=3933")
            url_button_service_4 = types.InlineKeyboardButton(text="Ð‘ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ - ÐžÐ½Ð»Ð°Ð¹Ð½â€‘Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ Ð´Ð»Ñ Ð¼Ð°Ð»Ð¾Ð³Ð¾ Ð±Ð¸Ð·Ð½ÐµÑÐ°", url="https://kontur.ru/bk?p=3933")
            url_button_service_5 = types.InlineKeyboardButton(text="ÐÐ¾Ñ€Ð¼Ð°Ñ‚Ð¸Ð² - Ð¡Ð¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²Ð¸Ñ Ð´Ð»Ñ Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð°", url="https://kontur.ru/normativ/order?p=3933")
            url_button_service_6 = types.InlineKeyboardButton(text="Ð—Ð°ÐºÑƒÐ¿ÐºÐ¸ - ÐŸÐ¾Ð¸ÑÐº Ð³Ð¾ÑÑƒÐ´Ð°Ñ€ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… Ð¸ ÐºÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ¸Ñ… Ð·Ð°ÐºÑƒÐ¿Ð¾Ðº", url="https://kontur.ru/zakupki?p=3933")
            url_button_service_7 = types.InlineKeyboardButton(text="ÐšÐ¾Ð¼Ð¿Ð°Ñ - Ð£Ð¼Ð½Ñ‹Ð¹ Ð¿Ð¾Ð¸ÑÐº ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð±Ð¸Ð·Ð½ÐµÑÐ°", url="https://kontur.ru/compass?p=3933")
            url_button_service_8 = types.InlineKeyboardButton(text="ÐœÐ°Ñ€ÐºÐµÑ‚ - Ð£Ñ‡ÐµÑ‚Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¸ ÐºÐ°ÑÑÐ¾Ð²Ð°Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°", url="https://kontur.ru/market?p=3933")
            url_button_service_9 = types.InlineKeyboardButton(text="ÐœÐ°Ñ€ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ° - ÐšÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð¼Ð°Ñ€ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸", url="https://kontur.ru/markirovka?p=3933")
            url_button_service_10 = types.InlineKeyboardButton(text="ÐžÐ¤Ð” - Ð£Ð´Ð¾Ð±Ð½Ñ‹Ð¹ Ð¸ Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹ Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ñ„Ð¸ÑÐºÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…", url="https://kontur.ru/ofd?p=3933")
            url_button_service_11 = types.InlineKeyboardButton(text="Ð¢Ñ€ÐµÐ²ÐµÐ» - Ð£Ð¿Ñ€Ð°Ð²Ð»ÑÐ¹Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¸Ñ€Ð¾Ð²ÐºÐ°Ð¼Ð¸ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¾ÐºÐ½Ðµ", url="https://kontur.ru/travel?p=3933")
            url_button_service_12 = types.InlineKeyboardButton(text="Ð­Ð»ÑŒÐ±Ð° - ÐžÐ½Ð»Ð°Ð¹Ð½â€‘Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ Ð´Ð»Ñ Ð˜ÐŸ Ð¸ ÐžÐžÐž Ð½Ð° Ð£Ð¡Ð Ð¸ Ð¿Ð°Ñ‚ÐµÐ½Ñ‚Ðµ", url="https://kontur.ru/elba?p=3933")
            markup_service.add(url_button_service_1, url_button_service_2, url_button_service_3, url_button_service_4, url_button_service_5, url_button_service_6, url_button_service_7, url_button_service_8,
                               url_button_service_9, url_button_service_10, url_button_service_11, url_button_service_12)
            bot.send_message(message.chat.id, "Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹", reply_markup=markup_service)            

        if message.text == "Ð”Ð°":
            bot.send_message(message.chat.id, 'Ð¡Ð¿Ð°ÑÐ¸Ð±Ð¾! ÐÐ°Ñˆ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ ÑÐ²ÑÐ¶ÐµÑ‚ÑÑ Ñ Ð’Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ. \nÐ”Ð»Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ \n/start')

        if message.text == "ÐÐµÑ‚":
            bot.send_message(message.chat.id, 'Ð”Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð½Ð°Ñ‡Ð½Ñ‘Ð¼ Ð·Ð°Ð½Ð¾Ð²Ð¾: \nÐ”Ð»Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ \n/start')

        if message.text == "Ð’ Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ":
            bot.send_message(message.chat.id, "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ÑÑ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ", reply_markup=markup_start)
            bot.register_next_step_handler(message, start)
            
#Ð—Ð°ÑÐ²ÐºÐ° Ð² Ð¢ÐŸ
#ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð˜ÐÐ - Ñ‡Ð¸ÑÐ»Ð¾Ð²Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ, Ð»Ð¸Ð±Ð¾ 10, Ð»Ð¸Ð±Ð¾ 12 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
def reg_tp(message):
    global inn_tp
    inn_tp = message.text
    if inn_tp == "/start" or inn_tp == "/help" or inn_tp == "Ð’ Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ":
        bot.send_message(message.chat.id, "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ÑÑ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ", reply_markup=markup_start)
        bot.register_next_step_handler(message, start)
    else:
        if inn_tp.isdigit():
            if len(inn_tp) == 10 or len(inn_tp) == 12:
                bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
                bot.register_next_step_handler(message, reg_email_tp)
            else:
                bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
                bot.register_next_step_handler(message, reg_tp)
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
            bot.register_next_step_handler(message, reg_tp)
            
#ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° email Ð¿Ð¾ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑŽ (string1)@(string2).(2+characters)        
def reg_email_tp(message):
    global email_tp
    email_tp = str(message.text)
    if email_tp == "/start" or inn_tp == "/help":
        bot.send_message(message.chat.id, "Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ÑÑ Ð² Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð¼ÐµÐ½ÑŽ", reply_markup=markup_start)
        bot.register_next_step_handler(message, start)
    else:
        test_email_tp = re.compile(r'([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+')
        if re.fullmatch(test_email_tp, email_tp):
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:")
            bot.register_next_step_handler(message, reg_phone_tp)
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
            bot.register_next_step_handler(message, reg_email_tp)
        
def reg_phone_tp(message):
    global phone_tp
    phone_tp = str(message.text)
    if phone_tp.isdigit():
        if len(phone_tp) >= 6 and len(phone_tp) <= 12:
            markup_yes_tp= types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_yes_tp = types.KeyboardButton("Ð”Ð°")
            item_no_tp = types.KeyboardButton("ÐÐµÑ‚")
            markup_yes_tp.add(item_yes_tp, item_no_tp)
            bot.send_message(message.chat.id, message.from_user.first_name + ", Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð¼, \nÐ’Ð°Ñˆ Ð˜ÐÐ: " + inn_tp + " \nÐ’Ð°Ñˆ e-mail: " + email_tp +
                            "\nÐ’Ð°Ñˆ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½: " + phone_tp + "?", reply_markup=markup_yes_tp)
            bot.send_message(-1001736886222, "Ð—Ð°ÑÐ²ÐºÐ° Ð² Ñ‚ÐµÑ….Ð¿Ð¾Ð´Ð´ÐµÐ¶ÐºÑƒ: \n{0}\nÐ¸Ð¼Ñ - {1}\nÐ½Ð¸Ðº - @{2}\nÐ¸Ð½Ð½ - {3}\nÐ¿Ð¾Ñ‡Ñ‚Ð° - {4}\nÑ‚ÐµÐ»ÐµÑ„Ð¾Ð½ - {5}"
                            .format(message.chat.id, message.from_user.first_name, message.from_user.username, inn_tp, email_tp, phone_tp))
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
            bot.register_next_step_handler(message, reg_phone_tp)
   
#Ð—Ð°ÑÐ²ÐºÐ° Ð­ÐºÑÑ‚ÐµÑ€Ð½
def reg_extern_contacts(message):
    if message.text in ["ÐžÐ±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°ÑŽÑ‰Ð°Ñ Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ", "ÐžÐ´Ð¸Ð½Ð¾Ñ‡Ð½Ð°Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ"]:
        global ob
        ob = message.text
        markup_3_2 = types.ReplyKeyboardMarkup(resize_keyboard=True)
        item_3_2_1 = types.KeyboardButton("ÐžÐ±Ñ‰Ð°Ñ")
        item_3_2_2 = types.KeyboardButton("Ð£Ð¡Ð, ÐŸÐ°Ñ‚ÐµÐ½Ñ‚")
        markup_3_2.add(item_3_2_1, item_3_2_2)
        bot.send_message(message.chat.id, 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ Ð½Ð°Ð»Ð¾Ð³Ð¾Ð¾Ð±Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ', reply_markup=markup_3_2)
        bot.register_next_step_handler(message, reg_sno_extern)

def reg_sno_extern(message):
    if message.text in ["ÐžÐ±Ñ‰Ð°Ñ", "Ð£Ð¡Ð, ÐŸÐ°Ñ‚ÐµÐ½Ñ‚"]:
        global sno
        sno = message.text
        bot.send_message(message.chat.id, 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð˜ÐÐ:')
        bot.register_next_step_handler(message, reg_inn_extern)

def reg_inn_extern(message):
    global inn_extern
    inn_extern = message.text
    if inn_extern.isdigit():
        if len(inn_extern) == 10 or len(inn_extern) == 12:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
            bot.register_next_step_handler(message, reg_email_extern)
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
            bot.register_next_step_handler(message, reg_inn_extern)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
        bot.register_next_step_handler(message, reg_inn_extern)
        return

def reg_email_extern(message):
    global email_extern
    email_extern = str(message.text)
    test_email_extern = re.compile(r'([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+')
    if re.fullmatch(test_email_extern, email_extern):
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°: ")
        bot.register_next_step_handler(message, reg_phone_extern)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
        bot.register_next_step_handler(message, reg_email_extern)

def reg_phone_extern(message):
    global phone_extern
    phone_extern = str(message.text)
    if phone_extern.isdigit():
        if len(phone_extern) >= 6 and len(phone_extern) <= 12:
            markup_yes_tp= types.ReplyKeyboardMarkup(resize_keyboard=True)
            item_yes_tp = types.KeyboardButton("Ð”Ð°")
            item_no_tp = types.KeyboardButton("ÐÐµÑ‚")
            markup_yes_tp.add(item_yes_tp, item_no_tp)
            bot.send_message(message.chat.id, message.from_user.first_name + ", Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð¼, \nÐ’Ð°Ñˆ Ð˜ÐÐ: " + inn_extern + " \nÐ’Ð°Ñˆ e-mail: " + email_extern +
                             "\nÐ’Ð°Ñˆ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½: " + phone_extern + "?", reply_markup=markup_yes_tp)
            bot.send_message(-1001736886222, "Ð—Ð°ÑÐ²ÐºÐ° Ð¿Ð¾ Ð­ÐºÑÑ‚ÐµÑ€Ð½Ñƒ: \n{0}\nÐ¸Ð¼Ñ - {1}\nÐ½Ð¸Ðº - @{2}\nÐ¸Ð½Ð½ - {3}\nÐ¿Ð¾Ñ‡Ñ‚Ð° - {4}\nÑ‚ÐµÐ»ÐµÑ„Ð¾Ð½ - {5}\nÑ‚Ð¸Ð¿ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ - {6}\nÐ¡ÐÐž - {7}"
                              .format(message.chat.id, message.from_user.first_name, message.from_user.username, inn_extern, email_extern, phone_extern, ob, sno))
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
            bot.register_next_step_handler(message, reg_phone_extern)
            return
            
    else:   
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
        bot.register_next_step_handler(message, reg_phone_extern)
        return
   
#Ð—Ð°ÑÐ²ÐºÐ° Ð”Ð¸Ð°Ð´Ð¾Ðº
def reg_dd(message):
    global package
    package = str(message.text)
    markup_dd_int = types.ReplyKeyboardMarkup(resize_keyboard=True)
    item_dd_int_1 = types.KeyboardButton("Ð”Ð°, Ñƒ Ð¼ÐµÐ½Ñ 1Ð¡")
    item_dd_int_2 = types.KeyboardButton("Ð”Ð°, Ñƒ Ð¼ÐµÐ½Ñ Ð´Ñ€ÑƒÐ³Ð°Ñ ÑƒÑ‡ÐµÑ‚Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°")
    item_dd_int_3 = types.KeyboardButton("ÐÐµÑ‚, Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ð°ÐºÐµÑ‚ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²")
    markup_dd_int.add(item_dd_int_1, item_dd_int_2, item_dd_int_3)
    bot.send_message(message.from_user.id, "Ð’Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð° Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ ÑƒÑ‡Ñ‘Ñ‚Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ð¹?", reply_markup=markup_dd_int) 
    bot.register_next_step_handler(message, reg_integration_dd)

def reg_integration_dd(message):
    global integration_dd
    integration_dd = str(message.text)
    bot.send_message(message.from_user.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð˜ÐÐ: ")
    bot.register_next_step_handler(message, reg_inn_dd)

def reg_inn_dd(message):
    global inn_dd
    inn_dd = message.text
    if inn_dd.isdigit():
        if len(inn_dd) == 10 or len(inn_dd) == 12:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
            bot.register_next_step_handler(message, reg_email_dd)
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
            bot.register_next_step_handler(message, reg_inn_dd)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
        bot.register_next_step_handler(message, reg_inn_dd)
        return

def reg_email_dd(message):
    global email_dd
    email_dd = str(message.text)
    test_email_dd = re.compile(r'([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+')
    if re.fullmatch(test_email_dd, email_dd):
        bot.send_message(message.from_user.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:")
        bot.register_next_step_handler(message, reg_phone_dd)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
        bot.register_next_step_handler(message, reg_email_dd)

def reg_phone_dd(message):
    global phone_dd
    phone_dd = message.text
    if phone_dd.isdigit():
        if len(phone_dd) >= 6 and len(phone_dd) <= 12:
            markup4 = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item11 = types.KeyboardButton("Ð”Ð°")
            item12 = types.KeyboardButton("ÐÐµÑ‚")
            markup4.add(item11, item12)
            bot.send_message(message.from_user.id, message.from_user.first_name + ', Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð¼, \nÐ’Ð°Ñˆ Ð˜ÐÐ: ' + inn_dd + ' \nÐ’Ð°Ñˆ e-mail: '
                             + email_dd + '\nÐÐ¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:' + phone_dd +'?', reply_markup=markup4)
            bot.send_message (-1001736886222, " Ð—Ð°ÑÐ²ÐºÐ° Ð¿Ð¾ Ð”Ð¸Ð°Ð´Ð¾ÐºÑƒ: \n{0}\nÐ¸Ð¼Ñ - {1}\nÐ½Ð¸Ðº - @{2}\nÐ¸Ð½Ð½ - {3}\nÐ¿Ð¾Ñ‡Ñ‚Ð° - {4}\nÑ‚ÐµÐ»ÐµÑ„Ð¾Ð½ - {5}\nÐ¿Ð°ÐºÐµÑ‚ - {6}\nÐ¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ -{7}"
                              .format(message.chat.id, message.from_user.first_name, message.from_user.username, inn_dd, email_dd, phone_dd, package, integration_dd))
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
            bot.register_next_step_handler(message, reg_phone_dd)
            return        
    else:   
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
        bot.register_next_step_handler(message, reg_phone_dd)
        return

#Ð—Ð°ÑÐ²ÐºÐ° Ð¤Ð¾ÐºÑƒÑ
def reg_focus(message):
    global focus_user
    focus_user = str(message.text)
    bot.send_message(message.chat.id, 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð˜ÐÐ: ')
    bot.register_next_step_handler(message, reg_inn_focus)

def reg_inn_focus(message):
    global inn_focus
    inn_focus = message.text
    if inn_focus.isdigit():
        if len(inn_focus) == 10 or len(inn_focus) == 12:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
            bot.register_next_step_handler(message, reg_email_focus)
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
            bot.register_next_step_handler(message, reg_inn_focus)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
        bot.register_next_step_handler(message, reg_inn_focus)
        return

def reg_email_focus(message):
    global email_focus
    email_focus = str(message.text)
    test_email_focus = re.compile(r'([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+')
    if re.fullmatch(test_email_focus, email_focus):
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°: ")
        bot.register_next_step_handler(message, reg_phone_focus)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
        bot.register_next_step_handler(message, reg_email_focus)

def reg_phone_focus(message):
    global phone_focus
    phone_focus = message.text
    if phone_focus.isdigit():
        if len(phone_focus) >= 6 and len(phone_focus) <= 12:
            markup4 = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item11 = types.KeyboardButton("Ð”Ð°")
            item12 = types.KeyboardButton("ÐÐµÑ‚")
            markup4.add(item11, item12)
            bot.send_message(message.from_user.id, message.from_user.first_name + ', Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð¼, \nÐ’Ð°Ñˆ Ð˜ÐÐ: ' + inn_focus + ' \nÐ’Ð°Ñˆ e-mail: '
                             + email_focus + '\nÐÐ¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:' + phone_focus +'?', reply_markup=markup4)
            bot.send_message(-1001736886222, "Ð—Ð°ÑÐ²ÐºÐ° Ð¿Ð¾ Ð¤Ð¾ÐºÑƒÑÑƒ: \n{0}\nÐ¸Ð¼Ñ - {1}\nÐ½Ð¸Ðº - @{2}\nÐ¸Ð½Ð½ - {3}\nÐ¿Ð¾Ñ‡Ñ‚Ð° - {4}\nÑ‚ÐµÐ»ÐµÑ„Ð¾Ð½ - {5}\nÐ¢Ð°Ñ€Ð¸Ñ„ - {6}"
                          .format(message.chat.id, message.from_user.first_name, message.from_user.username, inn_focus, email_focus, phone_focus, focus_user))
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
            bot.register_next_step_handler(message, reg_phone_focus)
            return        
    else:   
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
        bot.register_next_step_handler(message, reg_phone_focus)
        return

#Ð—Ð°ÑÐ²ÐºÐ° Ð—Ð°ÐºÑƒÐ¿ÐºÐ¸    
def reg_zakupki_tarif(message):
    global zakupki_tarif
    zakupki_tarif = message.text
    markup_zakupki_1 = types.ReplyKeyboardMarkup(resize_keyboard=True)
    item_zakupki_12m = types.KeyboardButton("12 Ð¼ÐµÑÑÑ†ÐµÐ²")
    item_zakupki_15m = types.KeyboardButton("15 Ð¼ÐµÑÑÑ†ÐµÐ²")
    item_zakupki_24m = types.KeyboardButton("24 Ð¼ÐµÑÑÑ†Ð°")
    markup_zakupki_1.add(item_zakupki_12m, item_zakupki_15m, item_zakupki_24m)
    bot.send_message(message.from_user.id, "Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿ÐµÑ€Ð¸Ð¾Ð´ Ð¾Ð±ÑÐ»ÑƒÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ", reply_markup=markup_zakupki_1) 
    bot.register_next_step_handler(message, reg_zakupki_period)

def reg_zakupki_period(message):
    global zakupki_period
    zakupki_period = str(message.text)
    bot.send_message(message.from_user.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð˜ÐÐ: ")
    bot.register_next_step_handler(message, reg_inn_zakupki)

def reg_inn_zakupki(message):
    global inn_zakupki
    inn_zakupki = message.text
    if inn_zakupki.isdigit():
        if len(inn_zakupki) == 10 or len(inn_zakupki) == 12:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
            bot.register_next_step_handler(message, reg_email_zakupki)
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
            bot.register_next_step_handler(message, reg_inn_zakupki)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð˜ÐÐ:")
        bot.register_next_step_handler(message, reg_inn_zakupki)
        return

def reg_email_zakupki(message):
    global email_zakupki
    email_zakupki = str(message.text)
    test_email_zakupki = re.compile(r'([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+')
    if re.fullmatch(test_email_zakupki, email_zakupki):
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°: ")
        bot.register_next_step_handler(message, reg_phone_zakupki)
    else:
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð°Ð´Ñ€ÐµÑ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ñ‡Ñ‚Ñ‹:")
        bot.register_next_step_handler(message, reg_email_zakupki)

def reg_phone_zakupki(message):
    global phone_zakupki
    phone_zakupki = message.text
    if phone_zakupki.isdigit():
        if len(phone_zakupki) >= 6 and len(phone_zakupki) <= 12:
            markup4 = types.ReplyKeyboardMarkup(resize_keyboard=True)
            item11 = types.KeyboardButton("Ð”Ð°")
            item12 = types.KeyboardButton("ÐÐµÑ‚")
            markup4.add(item11, item12)
            bot.send_message(message.from_user.id, message.from_user.first_name + ', Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ð¼, \nÐ’Ð°Ñˆ Ð˜ÐÐ: ' + inn_zakupki + ' \nÐ’Ð°Ñˆ e-mail: '
                             + email_zakupki + '\nÐÐ¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°:' + phone_zakupki +'?', reply_markup=markup4)
            bot.send_message(-1001736886222, "Ð—Ð°ÑÐ²ÐºÐ° Ð¿Ð¾ Ð—Ð°ÐºÑƒÐ¿ÐºÐ°Ð¼: \n{0}\nÐ¸Ð¼Ñ - {1}\nÐ½Ð¸Ðº - @{2}\nÐ¸Ð½Ð½ - {3}\nÐ¿Ð¾Ñ‡Ñ‚Ð° - {4}\nÑ‚ÐµÐ»ÐµÑ„Ð¾Ð½ - {5}\nÐ¢Ð°Ñ€Ð¸Ñ„ - {6}\nÐ¡Ñ€Ð¾Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ - {7}"
                          .format(message.chat.id, message.from_user.first_name, message.from_user.username, inn_zakupki, email_zakupki, phone_zakupki, zakupki_tarif, zakupki_period))
        else:
            bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
            bot.register_next_step_handler(message, reg_phone_zakupki)
            return        
    else:   
        bot.send_message(message.chat.id, "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ Ð½Ð¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð°")
        bot.register_next_step_handler(message, reg_phone_zakupki)
        return    

#ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð¿Ð¸ÑÐºÑƒ Ð•Ð“Ð Ð®Ð›
def egrul(message):
    global inn_egrul
    inn_egrul = str(message.text)
    url = "https://egrul.nalog.ru/index.html"
    options = webdriver.ChromeOptions()
    options.add_experimental_option("excludeSwitches", ["enable-automation"])
    options.add_experimental_option('useAutomationExtension', False)
    options.add_argument("--disable-blink-features=AutomationControlled")
    web = webdriver.Chrome(options=options, executable_path="C:\\Users\\ÐÐ»ÐµÐºÑÐµÐ¹\\Desktop\\Ð‘Ð¾Ñ‚\\Ð‘Ð¾Ñ‚\\application\\chromedriver.exe")
    web.maximize_window()
    web.get(url=url)
    time.sleep(5)
    web.find_element(By.XPATH, '//*[@id="query"]').click()
    source = web.find_element(By.XPATH, "//input[@class='form-control']")
    object_1.send_keys(inn_egrul)
    time.sleep(5)
    web.find_element(By.XPATH, '//*[@id="resultContent"]/div/div[3]/button').click()
    

bot.polling(none_stop=True, interval=1, timeout=0)
            

